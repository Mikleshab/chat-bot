<c-card>
  <c-card-header>Общение</c-card-header>
  <c-card-body>
    @if (result$ | async; as result) {
      @if (result.errors) {
        <div class="error-messages">
          <strong>Произошли ошибки:</strong>
          @for (error of result.errors; track error.message) {
            <c-alert color="light">{{ error.message }}</c-alert>
          }
        </div>
      } @else if (result.loading) {
        Загрузка...
      } @else {
        @if (result.data.getConversation.messages.length === 0) {
          Нет сообщений
        } @else {
          @defer {
            @for (message of result.data.getConversation.messages; track message.id) {
              <app-message [message]="message" [clientId]="clientId" />
            }
          }
        }
      }
    }
  </c-card-body>
</c-card>
